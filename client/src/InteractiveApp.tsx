import React, { useState, useEffect } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { \n  ThemeProvider, \n  createTheme, \n  CssBaseline, \n  Container, \n  Typography, \n  Button, \n  Box, \n  Card, \n  CardContent,\n  Stepper,\n  Step,\n  StepLabel,\n  TextField,\n  Chip,\n  Alert,\n  Fade,\n  Slide,\n  IconButton,\n  LinearProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  Grid,\n  Avatar,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemAvatar,\n  Divider\n} from '@mui/material';\nimport {\n  SmartToy,\n  TrendingUp,\n  Security,\n  Speed,\n  Close,\n  CheckCircle,\n  AutoAwesome,\n  Insights,\n  Notifications,\n  Store,\n  SavingsOutlined,\n  Psychology,\n  Timeline,\n  Shield\n} from '@mui/icons-material';\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#7F5AF0',\n    },\n    secondary: {\n      main: '#2CB67D',\n    },\n    background: {\n      default: '#FAFAFA',\n    },\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n  },\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n          textTransform: 'none',\n          fontWeight: 600,\n        },\n      },\n    },\n    MuiCard: {\n      styleOverrides: {\n        root: {\n          borderRadius: 16,\n          boxShadow: '0 8px 32px rgba(127, 90, 240, 0.1)',\n        },\n      },\n    },\n  },\n});\n\n// AI-Powered Subscription Discovery\nconst subscriptionCategories = [\n  { name: 'Streaming', icon: 'üé¨', savings: '$45/mo' },\n  { name: 'Software', icon: 'üíª', savings: '$32/mo' },\n  { name: 'Gaming', icon: 'üéÆ', savings: '$28/mo' },\n  { name: 'Fitness', icon: 'üí™', savings: '$15/mo' },\n  { name: 'News', icon: 'üì∞', savings: '$12/mo' },\n  { name: 'Music', icon: 'üéµ', savings: '$8/mo' },\n];\n\nconst predictiveInsights = [\n  { text: 'You could save $140/month by optimizing unused subscriptions', type: 'success' },\n  { text: 'AI detected 3 duplicate services costing $67/month', type: 'warning' },\n  { text: 'Recommended: Switch to annual billing for 20% savings', type: 'info' },\n];\n\nconst smartFeatures = [\n  {\n    icon: <Psychology color=\"primary\" />,\n    title: 'AI Subscription Discovery',\n    description: 'Automatically detects and categorizes all your subscriptions using advanced ML'\n  },\n  {\n    icon: <Timeline color=\"primary\" />,\n    title: 'Predictive Analytics',\n    description: 'Forecasts spending patterns and identifies optimization opportunities'\n  },\n  {\n    icon: <AutoAwesome color=\"primary\" />,\n    title: 'Smart Notifications',\n    description: 'Intelligent alerts for price changes, renewals, and savings opportunities'\n  },\n  {\n    icon: <Store color=\"primary\" />,\n    title: 'Subscription Marketplace',\n    description: 'Discover better alternatives with personalized recommendations'\n  },\n  {\n    icon: <Shield color=\"primary\" />,\n    title: 'Security Monitoring',\n    description: 'Monitor subscription security and get alerts for breaches'\n  },\n  {\n    icon: <Insights color=\"primary\" />,\n    title: 'Real-time Insights',\n    description: 'Live dashboard with spending analytics and optimization tips'\n  },\n];\n\nconst OnboardingFlow = ({ onClose }: { onClose: () => void }) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [userEmail, setUserEmail] = useState('');\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\n  const [progress, setProgress] = useState(0);\n\n  const steps = ['Welcome', 'AI Discovery', 'Personalize', 'Analytics'];\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setProgress((prev) => (prev >= 100 ? 0 : prev + 10));\n    }, 200);\n    return () => clearInterval(timer);\n  }, [activeStep]);\n\n  const handleNext = () => {\n    if (activeStep < steps.length - 1) {\n      setActiveStep(activeStep + 1);\n    } else {\n      // Complete onboarding\n      onClose();\n    }\n  };\n\n  const toggleCategory = (category: string) => {\n    setSelectedCategories(prev => \n      prev.includes(category) \n        ? prev.filter(c => c !== category)\n        : [...prev, category]\n    );\n  };\n\n  return (\n    <Dialog open fullScreen>\n      <DialogTitle sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Typography variant=\"h6\">Welcome to Subtrax</Typography>\n        <IconButton onClick={onClose}>\n          <Close />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n        <Container maxWidth=\"md\" sx={{ py: 4 }}>\n          <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\n            {steps.map((label) => (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n\n          {activeStep === 0 && (\n            <Fade in>\n              <Box textAlign=\"center\">\n                <AutoAwesome sx={{ fontSize: 80, color: 'primary.main', mb: 2 }} />\n                <Typography variant=\"h4\" gutterBottom>\n                  AI-Powered Subscription Intelligence\n                </Typography>\n                <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4, maxWidth: 600, mx: 'auto' }}>\n                  Our advanced AI will discover all your subscriptions, analyze your spending patterns, \n                  and provide personalized optimization recommendations to save you money.\n                </Typography>\n                <TextField\n                  fullWidth\n                  label=\"Email Address\"\n                  value={userEmail}\n                  onChange={(e) => setUserEmail(e.target.value)}\n                  sx={{ maxWidth: 400, mb: 3 }}\n                />\n                <br />\n                <Button \n                  variant=\"contained\" \n                  size=\"large\" \n                  onClick={handleNext}\n                  disabled={!userEmail}\n                  sx={{ px: 6, py: 2 }}\n                >\n                  Start AI Discovery\n                </Button>\n              </Box>\n            </Fade>\n          )}\n\n          {activeStep === 1 && (\n            <Fade in>\n              <Box>\n                <Typography variant=\"h5\" gutterBottom textAlign=\"center\">\n                  üîç AI Subscription Discovery in Progress\n                </Typography>\n                <LinearProgress \n                  variant=\"determinate\" \n                  value={progress} \n                  sx={{ mb: 3, height: 8, borderRadius: 4 }} \n                />\n                <Typography textAlign=\"center\" color=\"text.secondary\" gutterBottom>\n                  Scanning your digital footprint for subscriptions...\n                </Typography>\n                \n                <Grid container spacing={2} sx={{ mt: 2 }}>\n                  {subscriptionCategories.map((category, index) => (\n                    <Grid item xs={6} md={4} key={category.name}>\n                      <Slide direction=\"up\" in timeout={500 + index * 200}>\n                        <Card>\n                          <CardContent sx={{ textAlign: 'center' }}>\n                            <Typography variant=\"h4\">{category.icon}</Typography>\n                            <Typography variant=\"h6\">{category.name}</Typography>\n                            <Chip \n                              label={`Save ${category.savings}`} \n                              color=\"secondary\" \n                              size=\"small\" \n                            />\n                          </CardContent>\n                        </Card>\n                      </Slide>\n                    </Grid>\n                  ))}\n                </Grid>\n\n                <Box textAlign=\"center\" sx={{ mt: 4 }}>\n                  <Button variant=\"contained\" onClick={handleNext} sx={{ px: 6 }}>\n                    View Discoveries\n                  </Button>\n                </Box>\n              </Box>\n            </Fade>\n          )}\n\n          {activeStep === 2 && (\n            <Fade in>\n              <Box>\n                <Typography variant=\"h5\" gutterBottom textAlign=\"center\">\n                  üéØ Personalize Your Experience\n                </Typography>\n                <Typography textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                  Select categories you're interested in optimizing:\n                </Typography>\n                \n                <Grid container spacing={2} justifyContent=\"center\">\n                  {subscriptionCategories.map((category) => (\n                    <Grid item key={category.name}>\n                      <Chip\n                        label={`${category.icon} ${category.name}`}\n                        onClick={() => toggleCategory(category.name)}\n                        color={selectedCategories.includes(category.name) ? 'primary' : 'default'}\n                        variant={selectedCategories.includes(category.name) ? 'filled' : 'outlined'}\n                        sx={{ m: 0.5, px: 2, py: 1 }}\n                      />\n                    </Grid>\n                  ))}\n                </Grid>\n\n                <Box textAlign=\"center\" sx={{ mt: 4 }}>\n                  <Button \n                    variant=\"contained\" \n                    onClick={handleNext}\n                    disabled={selectedCategories.length === 0}\n                    sx={{ px: 6 }}\n                  >\n                    Generate Insights\n                  </Button>\n                </Box>\n              </Box>\n            </Fade>\n          )}\n\n          {activeStep === 3 && (\n            <Fade in>\n              <Box>\n                <Typography variant=\"h5\" gutterBottom textAlign=\"center\">\n                  üìä Your Personalized Analytics Dashboard\n                </Typography>\n                \n                <Grid container spacing={3}>\n                  <Grid item xs={12} md={6}>\n                    <Card>\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          üí∞ Potential Savings\n                        </Typography>\n                        <Typography variant=\"h3\" color=\"secondary.main\">\n                          $140/mo\n                        </Typography>\n                        <Typography color=\"text.secondary\">\n                          Based on AI analysis\n                        </Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  \n                  <Grid item xs={12} md={6}>\n                    <Card>\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          üîç Subscriptions Found\n                        </Typography>\n                        <Typography variant=\"h3\" color=\"primary.main\">\n                          {selectedCategories.length * 3 + 2}\n                        </Typography>\n                        <Typography color=\"text.secondary\">\n                          Active subscriptions\n                        </Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n\n                <Box sx={{ mt: 3 }}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    üß† AI Insights\n                  </Typography>\n                  {predictiveInsights.map((insight, index) => (\n                    <Alert key={index} severity={insight.type as any} sx={{ mb: 1 }}>\n                      {insight.text}\n                    </Alert>\n                  ))}\n                </Box>\n\n                <Box textAlign=\"center\" sx={{ mt: 4 }}>\n                  <Button \n                    variant=\"contained\" \n                    size=\"large\"\n                    onClick={handleNext}\n                    sx={{ px: 6, py: 2 }}\n                  >\n                    Access Full Dashboard\n                  </Button>\n                </Box>\n              </Box>\n            </Fade>\n          )}\n        </Container>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst LandingContent = () => {\n  const [showOnboarding, setShowOnboarding] = useState(false);\n  const [showDemo, setShowDemo] = useState(false);\n\n  return (\n    <>\n      <Container maxWidth=\"lg\">\n        <Box sx={{ \n          minHeight: '100vh', \n          display: 'flex', \n          flexDirection: 'column', \n          justifyContent: 'center', \n          alignItems: 'center',\n          textAlign: 'center',\n          py: 8 \n        }}>\n          <Typography variant=\"h1\" component=\"h1\" gutterBottom sx={{ \n            fontSize: { xs: '2.5rem', md: '4rem' },\n            fontWeight: 800,\n            background: 'linear-gradient(45deg, #7F5AF0 30%, #2CB67D 90%)',\n            backgroundClip: 'text',\n            WebkitBackgroundClip: 'text',\n            color: 'transparent',\n            mb: 2\n          }}>\n            Subtrax AI\n          </Typography>\n          \n          <Typography variant=\"h5\" color=\"text.secondary\" paragraph sx={{ mb: 4, maxWidth: 700 }}>\n            Revolutionary AI-powered subscription intelligence. Discover hidden subscriptions, \n            predict spending patterns, and save money with machine learning insights.\n          </Typography>\n          \n          <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', justifyContent: 'center', mb: 6 }}>\n            <Button \n              variant=\"contained\" \n              size=\"large\"\n              onClick={() => setShowOnboarding(true)}\n              startIcon={<AutoAwesome />}\n              sx={{ \n                px: 4, \n                py: 2,\n                fontSize: '1.1rem',\n                background: 'linear-gradient(45deg, #7F5AF0 30%, #2CB67D 90%)',\n              }}\n            >\n              Get Started Free\n            </Button>\n            <Button \n              variant=\"outlined\" \n              size=\"large\"\n              onClick={() => setShowDemo(true)}\n              startIcon={<Insights />}\n              sx={{ \n                px: 4, \n                py: 2,\n                fontSize: '1.1rem',\n              }}\n            >\n              View AI Demo\n            </Button>\n          </Box>\n          \n          {/* Unique Features Showcase */}\n          <Grid container spacing={3} sx={{ maxWidth: 1200 }}>\n            {smartFeatures.map((feature, index) => (\n              <Grid item xs={12} md={6} lg={4} key={feature.title}>\n                <Slide direction=\"up\" in timeout={300 + index * 200}>\n                  <Card sx={{ height: '100%', '&:hover': { transform: 'translateY(-4px)' }, transition: 'transform 0.3s' }}>\n                    <CardContent sx={{ textAlign: 'center', p: 3 }}>\n                      <Avatar sx={{ bgcolor: 'primary.light', mx: 'auto', mb: 2, width: 56, height: 56 }}>\n                        {feature.icon}\n                      </Avatar>\n                      <Typography variant=\"h6\" gutterBottom>\n                        {feature.title}\n                      </Typography>\n                      <Typography color=\"text.secondary\" variant=\"body2\">\n                        {feature.description}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Slide>\n              </Grid>\n            ))}\n          </Grid>\n\n          <Box sx={{ mt: 8, p: 4, bgcolor: 'grey.50', borderRadius: 3, maxWidth: 800 }}>\n            <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <CheckCircle color=\"success\" sx={{ mr: 1 }} />\n              üöÄ MVP Ready - Advanced Features\n            </Typography>\n            <Grid container spacing={2} sx={{ mt: 2 }}>\n              <Grid item xs={12} sm={6}>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  ‚úÖ AI Subscription Discovery<br/>\n                  ‚úÖ Predictive Spending Analytics<br/>\n                  ‚úÖ Smart Notification System<br/>\n                  ‚úÖ Security Monitoring\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  ‚úÖ Subscription Marketplace<br/>\n                  ‚úÖ Real-time Insights Dashboard<br/>\n                  ‚úÖ Automated Optimization<br/>\n                  ‚úÖ Enterprise-grade Security\n                </Typography>\n              </Grid>\n            </Grid>\n          </Box>\n        </Box>\n      </Container>\n\n      {showOnboarding && (\n        <OnboardingFlow onClose={() => setShowOnboarding(false)} />\n      )}\n\n      {showDemo && (\n        <Dialog open maxWidth=\"md\" fullWidth onClose={() => setShowDemo(false)}>\n          <DialogTitle>\n            ü§ñ AI Demo - Subscription Intelligence\n          </DialogTitle>\n          <DialogContent>\n            <Typography variant=\"h6\" gutterBottom>Live AI Analysis</Typography>\n            <List>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar sx={{ bgcolor: 'primary.main' }}>\n                    <SmartToy />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText \n                  primary=\"Netflix Premium\" \n                  secondary=\"$15.99/mo ‚Ä¢ Detected duplicate with Hulu plan ‚Ä¢ Potential saving: $8/mo\"\n                />\n              </ListItem>\n              <Divider />\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar sx={{ bgcolor: 'warning.main' }}>\n                    <TrendingUp />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText \n                  primary=\"Adobe Creative Suite\" \n                  secondary=\"$52.99/mo ‚Ä¢ Usage only 23% last month ‚Ä¢ Recommend downgrade to Photography plan\"\n                />\n              </ListItem>\n              <Divider />\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar sx={{ bgcolor: 'success.main' }}>\n                    <SavingsOutlined />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText \n                  primary=\"Spotify Premium\" \n                  secondary=\"$9.99/mo ‚Ä¢ Perfect usage pattern ‚Ä¢ AI recommends keeping this subscription\"\n                />\n              </ListItem>\n            </List>\n            <Box sx={{ mt: 3, textAlign: 'center' }}>\n              <Button variant=\"contained\" onClick={() => {setShowDemo(false); setShowOnboarding(true);}}>\n                Start Your Analysis\n              </Button>\n            </Box>\n          </DialogContent>\n        </Dialog>\n      )}\n    </>\n  );\n};\n\nconst App = () => (\n  <ThemeProvider theme={theme}>\n    <CssBaseline />\n    <LandingContent />\n  </ThemeProvider>\n);\n\nconst container = document.getElementById('root');\nconst root = createRoot(container!);\nroot.render(<App />);